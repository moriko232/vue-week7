(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-aac12866"],{"159b":function(t,e,a){var s=a("da84"),r=a("fdbc"),o=a("17c2"),i=a("9112");for(var n in r){var c=s[n],l=c&&c.prototype;if(l&&l.forEach!==o)try{i(l,"forEach",o)}catch(u){l.forEach=o}}},"17c2":function(t,e,a){"use strict";var s=a("b727").forEach,r=a("a640"),o=a("ae40"),i=r("forEach"),n=o("forEach");t.exports=i&&n?[].forEach:function(t){return s(this,t,arguments.length>1?arguments[1]:void 0)}},"1dde":function(t,e,a){var s=a("d039"),r=a("b622"),o=a("2d00"),i=r("species");t.exports=function(t){return o>=51||!s((function(){var e=[],a=e.constructor={};return a[i]=function(){return{foo:1}},1!==e[t](Boolean).foo}))}},4160:function(t,e,a){"use strict";var s=a("23e7"),r=a("17c2");s({target:"Array",proto:!0,forced:[].forEach!=r},{forEach:r})},"65f0":function(t,e,a){var s=a("861d"),r=a("e8b5"),o=a("b622"),i=o("species");t.exports=function(t,e){var a;return r(t)&&(a=t.constructor,"function"!=typeof a||a!==Array&&!r(a.prototype)?s(a)&&(a=a[i],null===a&&(a=void 0)):a=void 0),new(void 0===a?Array:a)(0===e?0:e)}},8418:function(t,e,a){"use strict";var s=a("c04e"),r=a("9bf2"),o=a("5c6c");t.exports=function(t,e,a){var i=s(e);i in t?r.f(t,i,o(0,a)):t[i]=a}},"99af":function(t,e,a){"use strict";var s=a("23e7"),r=a("d039"),o=a("e8b5"),i=a("861d"),n=a("7b0b"),c=a("50c4"),l=a("8418"),u=a("65f0"),d=a("1dde"),p=a("b622"),f=a("2d00"),m=p("isConcatSpreadable"),v=9007199254740991,h="Maximum allowed index exceeded",g=f>=51||!r((function(){var t=[];return t[m]=!1,t.concat()[0]!==t})),C=d("concat"),_=function(t){if(!i(t))return!1;var e=t[m];return void 0!==e?!!e:o(t)},b=!g||!C;s({target:"Array",proto:!0,forced:b},{concat:function(t){var e,a,s,r,o,i=n(this),d=u(i,0),p=0;for(e=-1,s=arguments.length;e<s;e++)if(o=-1===e?i:arguments[e],_(o)){if(r=c(o.length),p+r>v)throw TypeError(h);for(a=0;a<r;a++,p++)a in o&&l(d,p,o[a])}else{if(p>=v)throw TypeError(h);l(d,p++,o)}return d.length=p,d}})},a640:function(t,e,a){"use strict";var s=a("d039");t.exports=function(t,e){var a=[][t];return!!a&&s((function(){a.call(null,e||function(){throw 1},1)}))}},ae40:function(t,e,a){var s=a("83ab"),r=a("d039"),o=a("5135"),i=Object.defineProperty,n={},c=function(t){throw t};t.exports=function(t,e){if(o(n,t))return n[t];e||(e={});var a=[][t],l=!!o(e,"ACCESSORS")&&e.ACCESSORS,u=o(e,0)?e[0]:c,d=o(e,1)?e[1]:void 0;return n[t]=!!a&&!r((function(){if(l&&!s)return!0;var t={length:-1};l?i(t,1,{enumerable:!0,get:c}):t[1]=1,a.call(t,u,d)}))}},b727:function(t,e,a){var s=a("0366"),r=a("44ad"),o=a("7b0b"),i=a("50c4"),n=a("65f0"),c=[].push,l=function(t){var e=1==t,a=2==t,l=3==t,u=4==t,d=6==t,p=5==t||d;return function(f,m,v,h){for(var g,C,_=o(f),b=r(_),y=s(m,v,3),x=i(b.length),L=0,S=h||n,A=e?S(f,x):a?S(f,0):void 0;x>L;L++)if((p||L in b)&&(g=b[L],C=y(g,L,_),t))if(e)A[L]=C;else if(C)switch(t){case 3:return!0;case 5:return g;case 6:return L;case 2:c.call(A,g)}else if(u)return!1;return d?-1:l||u?u:A}};t.exports={forEach:l(0),map:l(1),filter:l(2),some:l(3),every:l(4),find:l(5),findIndex:l(6)}},c740:function(t,e,a){"use strict";var s=a("23e7"),r=a("b727").findIndex,o=a("44d2"),i=a("ae40"),n="findIndex",c=!0,l=i(n);n in[]&&Array(1)[n]((function(){c=!1})),s({target:"Array",proto:!0,forced:c||!l},{findIndex:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}}),o(n)},e6dc:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"products"},[a("Header",{attrs:{isLoading:t.isLoading}}),t._m(0),a("div",{staticClass:"main-content"},[a("div",{staticClass:"container"},[[a("div",{staticClass:"row justify-content-between"},[t._m(1),t.shopCart.length?a("div",{staticClass:"col-6 text-right"},[a("button",{staticClass:"btn btn-danger",on:{click:function(e){return t.deleteCartAll()}}},[t._v("清空購物車")])]):t._e()]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-12"},[a("table",{staticClass:"table mb-3"},[t._m(2),t._l(t.shopCart,(function(e,s){return[a("tr",{key:"cart"+s},[a("td",[t._v(t._s(e.product.title))]),a("td",[a("div",{staticClass:"qty"},[a("input",{staticClass:"form-control count",attrs:{type:"number",name:"qty",step:"1"},domProps:{value:e.quantity},on:{input:function(a){return t.editCart(e.product.id,a.target.value)}}})])]),a("td",[t._v(t._s(e.product.price))]),a("td",{staticClass:"text-right"},[t._v(t._s(e.product.price*e.quantity))]),a("td",{staticClass:"text-right"},[a("button",{staticClass:"btn btn-danger",on:{click:function(a){return t.deleteCartItem(e.product.id)}}},[t._v(" 刪除 ")])])])]})),t.shopCart.length?[a("tr",[a("td",[t._v("總計")]),a("td"),a("td"),a("td",{staticClass:"text-right"},[t._v(t._s(t.total))]),a("td")])]:[t._m(3)]],2),t._m(4),a("validation-observer",{scopedSlots:t._u([{key:"default",fn:function(e){var s=e.invalid,r=e.handleSubmit;return[a("form",{staticClass:"form",attrs:{action:""},on:{submit:function(e){return e.preventDefault(),r(t.sendOrderApi)}}},[a("validation-provider",{attrs:{rules:"required"},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.errors,r=e.classes;return[a("h3",[t._v("收件人姓名")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.customer.name,expression:"customer.name"}],staticClass:"form-control",class:r,attrs:{name:"收件人姓名"},domProps:{value:t.customer.name},on:{input:function(e){e.target.composing||t.$set(t.customer,"name",e.target.value)}}}),a("span",{class:r},[t._v(t._s(s[0]))])]}}],null,!0)}),a("validation-provider",{attrs:{rules:"required|email"},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.errors,r=e.classes;return[a("h3",[t._v("Email")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.customer.email,expression:"customer.email"}],staticClass:"form-control",class:r,attrs:{type:"email",name:"email"},domProps:{value:t.customer.email},on:{input:function(e){e.target.composing||t.$set(t.customer,"email",e.target.value)}}}),a("span",{class:r},[t._v(t._s(s[0]))])]}}],null,!0)}),a("validation-provider",{attrs:{rules:"required|min:8"},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.errors,r=e.classes;return[a("h3",[t._v("電話")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.customer.tel,expression:"customer.tel"}],staticClass:"form-control",class:r,attrs:{name:"電話"},domProps:{value:t.customer.tel},on:{input:function(e){e.target.composing||t.$set(t.customer,"tel",e.target.value)}}}),a("span",{class:r},[t._v(t._s(s[0]))])]}}],null,!0)}),a("validation-provider",{attrs:{rules:"required"},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.errors,r=e.classes;return[a("h3",[t._v("地址")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.customer.address,expression:"customer.address"}],staticClass:"form-control",class:r,attrs:{name:"地址"},domProps:{value:t.customer.address},on:{input:function(e){e.target.composing||t.$set(t.customer,"address",e.target.value)}}}),a("span",{class:r},[t._v(t._s(s[0]))])]}}],null,!0)}),a("div",{staticClass:"form-item"},[a("h3",[t._v("付款方式")]),a("div",{staticClass:"form-group"},[a("select",{directives:[{name:"model",rawName:"v-model",value:t.customer.payment,expression:"customer.payment"}],staticClass:"form-control",on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.customer,"payment",e.target.multiple?a:a[0])}}},[a("option",{attrs:{value:"WebATM"}},[t._v("WebATM")]),a("option",{attrs:{value:"ATM"}},[t._v("ATM")]),a("option",{attrs:{value:"CVS"}},[t._v("CVS")]),a("option",{attrs:{value:"Barcode"}},[t._v("Barcode")]),a("option",{attrs:{value:"Credit"}},[t._v("Credit")]),a("option",{attrs:{value:"ApplePay"}},[t._v("ApplePay")]),a("option",{attrs:{value:"GooglePay"}},[t._v("GooglePay")])])])]),a("div",{staticClass:"form-item"},[a("h3",[t._v("留言")]),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.customer.message,expression:"customer.message"}],staticClass:"form-control",attrs:{name:"",id:"",cols:"30",rows:"10"},domProps:{value:t.customer.message},on:{input:function(e){e.target.composing||t.$set(t.customer,"message",e.target.value)}}})]),a("br"),a("input",{staticClass:"btn btn-info",attrs:{disabled:s||!t.shopCart.length||t.isLoading,type:"submit",value:"確認訂購"}})],1)]}}])})],1)])],a("h2",{attrs:{id:"products"}},[t._v("手工皂")]),a("div",{staticClass:"row",attrs:{id:"product-list"}},[t._l(t.products,(function(e,s){return[a("div",{key:"item"+s,staticClass:"product-item col-md-4"},[a("img",{attrs:{src:e.imageUrl[0]}}),a("div",{staticClass:"product-text"},[a("h5",{staticClass:"title"},[a("router-link",{attrs:{to:"/product/"+e.id}},[t._v(t._s(e.title))])],1),a("p",{staticClass:"text"},[t._v(t._s(e.content))]),a("div",{staticClass:"text-right"},[a("p",{staticClass:"price"},[t._v("$ "+t._s(e.price))]),a("p",{staticClass:"origin-price"},[t._v("原價 $ "+t._s(e.origin_price))])])]),a("span",[a("button",{staticClass:"add-cart",on:{click:function(a){return t.addToCart(e,1)}}},[t._v("加入購物車")])])])]}))],2)],2),a("div",{staticClass:"modal fade bd-example-modal-lg",attrs:{id:"messageModal",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalCenterTitle","aria-hidden":"true"}},[a("div",{staticClass:"modal-dialog modal-sm modal-dialog-centered",attrs:{role:"document"}},[a("div",{staticClass:"modal-content"},[t._m(5),a("div",{staticClass:"modal-body"},[t._v(" "+t._s(t.messageText)+" ")]),a("div",{staticClass:"modal-footer"},[a("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:function(e){return t.closeMessage()}}},[t._v("OK")])])])])])])],1)},r=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("nav",{staticClass:"sub-menu-wrap"},[a("div",{staticClass:"container"},[a("ul",{staticClass:"sub-menu"},[a("li",[a("a",{attrs:{href:"#"}},[t._v("手工皂")])]),a("li",[a("a",{attrs:{href:"#"}},[t._v("優惠組合")])])])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-6"},[a("h2",[t._v("購物清單")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("tr",[a("th",[t._v("品名")]),a("th",[t._v("數量")]),a("th",[t._v("價格")]),a("th",{staticClass:"text-right"},[t._v("小計")]),a("th")])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("tr",[a("td",{staticClass:"text-center",attrs:{colspan:"5"}},[t._v("購物尚無商品")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("h2",[t._v("填寫資料")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal-header"},[a("h5",{staticClass:"modal-title",attrs:{id:"exampleModalLongTitle"}},[t._v(" 系統訊息 ")]),a("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[a("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])])}],o=(a("99af"),a("c740"),a("4160"),a("159b"),a("31fb")),i="".concat("https://course-ec-api.hexschool.io/api/").concat("31e50ae2-761f-42e4-b9da-0c081fdb851d","/ec/products"),n="".concat("https://course-ec-api.hexschool.io/api/").concat("31e50ae2-761f-42e4-b9da-0c081fdb851d","/ec/shopping"),c="".concat("https://course-ec-api.hexschool.io/api/").concat("31e50ae2-761f-42e4-b9da-0c081fdb851d","/ec/shopping/all/product"),l="".concat("https://course-ec-api.hexschool.io/api/").concat("31e50ae2-761f-42e4-b9da-0c081fdb851d","/ec/orders"),u={name:"Products",components:{Header:o["a"]},data:function(){return{isLoading:!0,products:[],shopCart:[],customer:{name:"",email:"",tel:"",address:"",payment:"WebATM",message:""},messageModelOpen:!1,messageText:""}},computed:{total:function(){var t=0;return this.shopCart.forEach((function(e){t+=e.product.price*e.quantity})),t}},mounted:function(){this.getDataApi(),this.getShopCartApi(),console.log()},methods:{openMessage:function(t){this.messageText=t,$("#messageModal").modal("show"),this.messageModelOpen=!0},closeMessage:function(){this.messageText="",$("#messageModal").modal("hide"),this.messageModelOpen=!1},sendOrderApi:function(){var t=this;this.isLoading=!0,this.$http.post(l,this.customer).then((function(){t.getShopCartApi(),t.shopCart=[],t.isLoading=!1,t.openMessage("已收到您的訂單!")})).catch((function(t){console.log("err",t)}))},getShopCartApi:function(){var t=this;this.$http.get(n).then((function(e){t.shopCart=e.data.data})).catch((function(t){console.log("err",t)}))},isAlreadyInCart:function(t){return this.shopCart.findIndex((function(e){return e.id===t}))},deleteCartAll:function(){var t=this;this.isLoading=!0,this.$http.delete(c).then((function(e){t.shopCart=e.data.data,t.getDataApi(),t.getShopCartApi(),t.isLoading=!1}))},deleteCartItem:function(t){var e=this;this.isLoading=!0,this.$http.delete("".concat(n,"/").concat(t)).then((function(t){e.shopCart=t.data.data,e.getDataApi(),e.getShopCartApi(),e.isLoading=!1}))},editCart:function(t){var e=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;this.isLoading=!0;var s={product:t,quantity:a};this.$http.patch(n,s).then((function(t){e.shopCart=t.data.data,e.getDataApi(),e.getShopCartApi(),e.isLoading=!1})).catch((function(t){console.log("err",t)}))},addToCart:function(t){var e=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;this.isLoading=!0;var s={product:t.id,quantity:a};this.$http.post(n,s).then((function(t){e.shopCart=t.data.data,e.getDataApi(),e.getShopCartApi(),e.isLoading=!1})).catch((function(t){console.log("err",t)}))},getDataApi:function(){var t=this;this.isLoading=!0,this.$http.get(i).then((function(e){t.products=e.data.data,t.isLoading=!1})).catch((function(t){console.log("err",t)}))}}},d=u,p=a("2877"),f=Object(p["a"])(d,s,r,!1,null,null,null);e["default"]=f.exports},e8b5:function(t,e,a){var s=a("c6b6");t.exports=Array.isArray||function(t){return"Array"==s(t)}},fdbc:function(t,e){t.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}}}]);
//# sourceMappingURL=chunk-aac12866.94be9f9c.js.map