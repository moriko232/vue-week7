(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-515e30ec"],{"0450":function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("nav",{attrs:{"aria-label":"nav"}},[a("ul",{staticClass:"pagination"},[a("li",{staticClass:"page-item",class:{disabled:1===t.pages.current_page}},[a("a",{staticClass:"page-link",attrs:{href:"#","aria-label":"Previous"},on:{click:function(e){return e.preventDefault(),t.emitPages(t.pages.current_page-1)}}},[a("span",{attrs:{"aria-hidden":"true"}},[t._v("«")])])]),t._l(t.pages.total_pages,(function(e,i){return a("li",{key:i,staticClass:"page-item",class:{active:e===t.pages.current_page}},[a("a",{staticClass:"page-link",attrs:{href:"#"},on:{click:function(a){return a.preventDefault(),t.emitPages(e)}}},[t._v(t._s(e))])])})),a("li",{staticClass:"page-item",class:{disabled:t.pages.current_page===t.pages.total_pages}},[a("a",{staticClass:"page-link",attrs:{href:"#","aria-label":"Next"},on:{click:function(e){return e.preventDefault(),t.emitPages(t.pages.current_page+1)}}},[a("span",{attrs:{"aria-hidden":"true"}},[t._v("»")])])])],2)])},s=[],n={name:"Pagination",data:function(){return{}},props:{pages:{type:Object,default:function(){return{}}}},methods:{emitPages:function(t){this.$emit("emit-pages",t)}}},r=n,o=a("2877"),c=Object(o["a"])(r,i,s,!1,null,null,null);e["a"]=c.exports},"159b":function(t,e,a){var i=a("da84"),s=a("fdbc"),n=a("17c2"),r=a("9112");for(var o in s){var c=i[o],l=c&&c.prototype;if(l&&l.forEach!==n)try{r(l,"forEach",n)}catch(d){l.forEach=n}}},"17c2":function(t,e,a){"use strict";var i=a("b727").forEach,s=a("a640"),n=a("ae40"),r=s("forEach"),o=n("forEach");t.exports=r&&o?[].forEach:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}},"1dde":function(t,e,a){var i=a("d039"),s=a("b622"),n=a("2d00"),r=s("species");t.exports=function(t){return n>=51||!i((function(){var e=[],a=e.constructor={};return a[r]=function(){return{foo:1}},1!==e[t](Boolean).foo}))}},4160:function(t,e,a){"use strict";var i=a("23e7"),s=a("17c2");i({target:"Array",proto:!0,forced:[].forEach!=s},{forEach:s})},"65f0":function(t,e,a){var i=a("861d"),s=a("e8b5"),n=a("b622"),r=n("species");t.exports=function(t,e){var a;return s(t)&&(a=t.constructor,"function"!=typeof a||a!==Array&&!s(a.prototype)?i(a)&&(a=a[r],null===a&&(a=void 0)):a=void 0),new(void 0===a?Array:a)(0===e?0:e)}},8418:function(t,e,a){"use strict";var i=a("c04e"),s=a("9bf2"),n=a("5c6c");t.exports=function(t,e,a){var r=i(e);r in t?s.f(t,r,n(0,a)):t[r]=a}},"99af":function(t,e,a){"use strict";var i=a("23e7"),s=a("d039"),n=a("e8b5"),r=a("861d"),o=a("7b0b"),c=a("50c4"),l=a("8418"),d=a("65f0"),p=a("1dde"),u=a("b622"),m=a("2d00"),f=u("isConcatSpreadable"),h=9007199254740991,v="Maximum allowed index exceeded",g=m>=51||!s((function(){var t=[];return t[f]=!1,t.concat()[0]!==t})),b=p("concat"),D=function(t){if(!r(t))return!1;var e=t[f];return void 0!==e?!!e:n(t)},_=!g||!b;i({target:"Array",proto:!0,forced:_},{concat:function(t){var e,a,i,s,n,r=o(this),p=d(r,0),u=0;for(e=-1,i=arguments.length;e<i;e++)if(n=-1===e?r:arguments[e],D(n)){if(s=c(n.length),u+s>h)throw TypeError(v);for(a=0;a<s;a++,u++)a in n&&l(p,u,n[a])}else{if(u>=h)throw TypeError(v);l(p,u++,n)}return p.length=u,p}})},a434:function(t,e,a){"use strict";var i=a("23e7"),s=a("23cb"),n=a("a691"),r=a("50c4"),o=a("7b0b"),c=a("65f0"),l=a("8418"),d=a("1dde"),p=a("ae40"),u=d("splice"),m=p("splice",{ACCESSORS:!0,0:0,1:2}),f=Math.max,h=Math.min,v=9007199254740991,g="Maximum allowed length exceeded";i({target:"Array",proto:!0,forced:!u||!m},{splice:function(t,e){var a,i,d,p,u,m,b=o(this),D=r(b.length),_=s(t,D),C=arguments.length;if(0===C?a=i=0:1===C?(a=0,i=D-_):(a=C-2,i=h(f(n(e),0),D-_)),D+a-i>v)throw TypeError(g);for(d=c(b,i),p=0;p<i;p++)u=_+p,u in b&&l(d,p,b[u]);if(d.length=i,a<i){for(p=_;p<D-i;p++)u=p+i,m=p+a,u in b?b[m]=b[u]:delete b[m];for(p=D;p>D-i+a;p--)delete b[p-1]}else if(a>i)for(p=D-i;p>_;p--)u=p+i-1,m=p+a-1,u in b?b[m]=b[u]:delete b[m];for(p=0;p<a;p++)b[p+_]=arguments[p+2];return b.length=D-i+a,d}})},a640:function(t,e,a){"use strict";var i=a("d039");t.exports=function(t,e){var a=[][t];return!!a&&i((function(){a.call(null,e||function(){throw 1},1)}))}},ae40:function(t,e,a){var i=a("83ab"),s=a("d039"),n=a("5135"),r=Object.defineProperty,o={},c=function(t){throw t};t.exports=function(t,e){if(n(o,t))return o[t];e||(e={});var a=[][t],l=!!n(e,"ACCESSORS")&&e.ACCESSORS,d=n(e,0)?e[0]:c,p=n(e,1)?e[1]:void 0;return o[t]=!!a&&!s((function(){if(l&&!i)return!0;var t={length:-1};l?r(t,1,{enumerable:!0,get:c}):t[1]=1,a.call(t,d,p)}))}},b727:function(t,e,a){var i=a("0366"),s=a("44ad"),n=a("7b0b"),r=a("50c4"),o=a("65f0"),c=[].push,l=function(t){var e=1==t,a=2==t,l=3==t,d=4==t,p=6==t,u=5==t||p;return function(m,f,h,v){for(var g,b,D=n(m),_=s(D),C=i(f,h,3),y=r(_.length),x=0,w=v||o,L=e?w(m,y):a?w(m,0):void 0;y>x;x++)if((u||x in _)&&(g=_[x],b=C(g,x,D),t))if(e)L[x]=b;else if(b)switch(t){case 3:return!0;case 5:return g;case 6:return x;case 2:c.call(L,g)}else if(d)return!1;return p?-1:l||d?d:L}};t.exports={forEach:l(0),map:l(1),filter:l(2),some:l(3),every:l(4),find:l(5),findIndex:l(6)}},d416:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"container"},[a("div",{staticClass:"d-flex justify-content-between mb-2"},[a("h2",[t._v("產品列表")]),a("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:function(e){return t.editData()}}},[t._v("新增產品")])]),a("table",{staticClass:"table"},[t._m(0),t._l(t.shopDatas,(function(e,i){return a("tr",{key:e.id},[a("td",[t._v(t._s((t.pagination.current_page-1)*t.productListSettings.paged+i+1))]),a("td",[t._v(t._s(e.title))]),a("td",[e.enabled?[a("span",{staticClass:"text-success"},[t._v("是")])]:[a("span",[t._v("否")])]],2),a("td",[t._v(t._s(e.category))]),a("td",[t._v(t._s(e.origin_price))]),a("td",[t._v(t._s(e.price))]),a("td",[a("button",{staticClass:"btn btn-primary mr-2",attrs:{type:"button"},on:{click:function(a){return t.editData(e)}}},[t._v(" 修改 ")]),a("button",{staticClass:"btn btn-danger",attrs:{type:"button"},on:{click:function(a){return t.deleteQA(e.id,e.title)}}},[t._v(" 刪除 ")])])])}))],2),a("Pagination",{attrs:{pages:t.pagination,name:"pagination"},on:{"emit-pages":t.getData}}),a("div",{staticClass:"modal fade bd-example-modal-sm",attrs:{id:"deleteModal",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalCenterTitle","aria-hidden":"true"}},[a("div",{staticClass:"modal-dialog modal-sm modal-dialog-centered",attrs:{role:"document"}},[a("div",{staticClass:"modal-content"},[t._m(1),a("div",{staticClass:"modal-body"},[t._v("確定要刪除 "+t._s(t.tempDelete.title)+"?")]),a("div",{staticClass:"modal-footer"},[a("button",{staticClass:"btn btn-secondary",attrs:{type:"button","data-dismiss":"modal"}},[t._v("取消")]),a("button",{staticClass:"btn btn-danger",attrs:{type:"button"},on:{click:function(e){return t.deleteData()}}},[t._v("確認刪除")])])])])]),a("div",{staticClass:"modal fade bd-example-modal-lg",attrs:{id:"editModal",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalCenterTitle","aria-hidden":"true"}},[a("div",{staticClass:"modal-dialog modal-lg modal-dialog-centered",attrs:{role:"document"}},[a("div",{staticClass:"modal-content"},[a("div",{staticClass:"modal-header"},[a("h5",{staticClass:"modal-title",attrs:{id:"exampleModalLongTitle"}},[t.tempData.id?[t._v(" 編輯產品 ")]:[t._v(" 新增產品 ")]],2),t._m(2)]),a("div",{staticClass:"modal-body"},[a("form",{staticClass:"form-group w-100"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-sm-6"},[a("table",{staticClass:"w-100"},[a("tr",[a("th",{attrs:{width:"30%"}},[t._v(" 產品標題 ")]),a("td",{attrs:{width:"70%"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.tempData.title,expression:"tempData.title"}],staticClass:"form-control",attrs:{type:"text",placeholder:"產品標題",required:""},domProps:{value:t.tempData.title},on:{input:function(e){e.target.composing||t.$set(t.tempData,"title",e.target.value)}}})])]),a("tr",[a("th",[t._v("分類")]),a("td",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.tempData.category,expression:"tempData.category"}],staticClass:"form-control",attrs:{type:"text",placeholder:"分類"},domProps:{value:t.tempData.category},on:{input:function(e){e.target.composing||t.$set(t.tempData,"category",e.target.value)}}})])]),a("tr",[a("th",[t._v("內容")]),a("td",[a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.tempData.content,expression:"tempData.content"}],staticClass:"form-control",attrs:{type:"text",placeholder:"內容"},domProps:{value:t.tempData.content},on:{input:function(e){e.target.composing||t.$set(t.tempData,"content",e.target.value)}}})])]),a("tr",[a("th",[t._v("原價")]),a("td",[a("input",{directives:[{name:"model",rawName:"v-model.number",value:t.tempData.origin_price,expression:"tempData.origin_price",modifiers:{number:!0}}],staticClass:"form-control",attrs:{type:"text",placeholder:"原價"},domProps:{value:t.tempData.origin_price},on:{input:function(e){e.target.composing||t.$set(t.tempData,"origin_price",t._n(e.target.value))},blur:function(e){return t.$forceUpdate()}}})])]),a("tr",[a("th",[t._v("售價")]),a("td",[a("input",{directives:[{name:"model",rawName:"v-model.number",value:t.tempData.price,expression:"tempData.price",modifiers:{number:!0}}],staticClass:"form-control",attrs:{type:"text",placeholder:"售價"},domProps:{value:t.tempData.price},on:{input:function(e){e.target.composing||t.$set(t.tempData,"price",t._n(e.target.value))},blur:function(e){return t.$forceUpdate()}}})])])])]),a("div",{staticClass:"col-sm-6"},[a("table",{staticClass:"w-100"},[a("tr",[a("th",{attrs:{width:"30%"}},[t._v("單位")]),a("td",{attrs:{width:"70%"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.tempData.unit,expression:"tempData.unit"}],staticClass:"form-control",attrs:{type:"text",placeholder:"單位"},domProps:{value:t.tempData.unit},on:{input:function(e){e.target.composing||t.$set(t.tempData,"unit",e.target.value)}}})])]),a("tr",[a("th",[t._v("是否啟用")]),a("td",[a("div",{staticClass:"custom-control custom-switch"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.tempData.enabled,expression:"tempData.enabled"}],staticClass:"custom-control-input",attrs:{type:"checkbox",id:"customSwitches"},domProps:{checked:Array.isArray(t.tempData.enabled)?t._i(t.tempData.enabled,null)>-1:t.tempData.enabled},on:{change:function(e){var a=t.tempData.enabled,i=e.target,s=!!i.checked;if(Array.isArray(a)){var n=null,r=t._i(a,n);i.checked?r<0&&t.$set(t.tempData,"enabled",a.concat([n])):r>-1&&t.$set(t.tempData,"enabled",a.slice(0,r).concat(a.slice(r+1)))}else t.$set(t.tempData,"enabled",s)}}}),a("label",{staticClass:"custom-control-label",attrs:{for:"customSwitches"}})])])]),a("tr",[a("th",[t._v("敘述")]),a("td",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.tempData.description,expression:"tempData.description"}],staticClass:"form-control",attrs:{type:"text",placeholder:"敘述"},domProps:{value:t.tempData.description},on:{input:function(e){e.target.composing||t.$set(t.tempData,"description",e.target.value)}}})])])]),a("hr"),t._m(3),t._l(3,(function(e){return a("div",{key:e,staticClass:"mt-3"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.tempData.imageUrl[e-1],expression:"tempData.imageUrl[imgIdx - 1]"}],staticClass:"form-control",attrs:{type:"text",placeholder:"圖片網址"},domProps:{value:t.tempData.imageUrl[e-1]},on:{input:function(a){a.target.composing||t.$set(t.tempData.imageUrl,e-1,a.target.value)}}}),t.tempData.imageUrl[e-1]?a("img",{attrs:{src:t.tempData.imageUrl[e-1],alt:""}}):t._e()])})),a("div",{staticClass:"mt-3"},[a("table",{staticClass:"w-100"},[a("tr",[t._m(4),a("td",{attrs:{width:"70%"}},[a("input",{ref:"file",staticClass:"form-control",attrs:{id:"customFile",type:"file"},on:{change:t.uploadFile}})])])])])],2)])])]),a("div",{staticClass:"modal-footer"},[a("button",{staticClass:"btn btn-secondary",attrs:{type:"button","data-dismiss":"modal"}},[t._v("Close")]),a("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:function(e){return t.updateData()}}},[t._v("送出")])])])])])],1),a("div",{staticClass:"mt-5"})])},s=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("tr",[a("th",[t._v("序號")]),a("th",[t._v("產品名稱")]),a("th",[t._v("商品上架")]),a("th",[t._v("商品分類")]),a("th",[t._v("原價")]),a("th",[t._v("售價")]),a("th",[t._v("功能")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal-header"},[a("h5",{staticClass:"modal-title",attrs:{id:"exampleModalLongTitle"}},[t._v("確認操作")]),a("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[a("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[a("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"mb-3"},[a("b",[t._v("圖片網址")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("th",{attrs:{width:"30%"}},[a("label",{attrs:{for:"customFile"}},[t._v(" 上傳圖片 ")])])}],n=(a("99af"),a("4160"),a("a434"),a("159b"),a("0450")),r="".concat("https://course-ec-api.hexschool.io/api/").concat("31e50ae2-761f-42e4-b9da-0c081fdb851d"),o="".concat("https://course-ec-api.hexschool.io/api/").concat("31e50ae2-761f-42e4-b9da-0c081fdb851d","/admin/ec/products"),c={components:{Pagination:n["a"]},data:function(){return{productListSettings:{page:1,paged:10},pagination:{current_page:1},tempDelete:{id:"",title:""},shopDatas:[],baseData:{imageUrl:[]},tempData:{imageUrl:[]}}},created:function(){this.getData()},methods:{getData:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.$parent.isLoading=!0;var a="".concat(o);this.productListSettings.page=e,this.$http.get(a,{params:this.productListSettings}).then((function(e){t.shopDatas=e.data.data,t.pagination=e.data.meta.pagination,t.$parent.isLoading=!1}))},updateData:function(){var t=this;if(this.tempData.id)this.apiEditData(this.tempData.id),this.shopDatas.forEach((function(e,a){t.tempData.id===e.id&&(t.shopDatas[a]=t.tempData)}));else{var e=(new Date).getTime();this.tempData.id=e,this.shopDatas.push(this.tempData),this.apiAddNewData(this.tempData)}this.tempData=JSON.parse(JSON.stringify(this.baseData)),$("#editModal").modal("hide")},editData:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.baseData;this.tempData=JSON.parse(JSON.stringify(t)),$("#editModal").modal("show")},apiEditData:function(t){var e=this;this.$parent.isLoading=!0;var a="".concat(r,"/admin/ec/product/").concat(t);this.$http.patch(a,this.tempData).then((function(){e.getData()}))},apiAddNewData:function(t){var e=this;this.$parent.isLoading=!0;var a="".concat(r,"/admin/ec/product");this.$http.post(a,t).then((function(){e.getData()}))},deleteQA:function(t,e){this.tempDelete.id=t,this.tempDelete.title=e,$("#deleteModal").modal("show")},deleteData:function(){var t=this,e=this.tempDelete.id;this.apiDeleteData(e),this.shopDatas.forEach((function(a,i){a.id===e&&t.shopDatas.splice(i,1)})),this.tempDelete.id="",this.tempDelete.title="",$("#deleteModal").modal("hide")},apiDeleteData:function(t){var e=this;this.$parent.isLoading=!0;var a="".concat(r,"/admin/ec/product/").concat(t);this.$http.delete(a).then((function(){e.getData()}))},uploadFile:function(){var t=this;this.$parent.isLoading=!0;var e=this.$refs.file.files[0],a=new FormData;a.append("file",e);var i="".concat(r,"/admin/storage");this.$http.post(i,a,{headers:{"Content-Type":"multipart/form-data"}}).then((function(e){t.$parent.isLoading=!1,200===e.status&&t.tempData.imageUrl.push(e.data.data.path)})).catch((function(){t.$parent.isLoading=!0}))}}},l=c,d=a("2877"),p=Object(d["a"])(l,i,s,!1,null,null,null);e["default"]=p.exports},e8b5:function(t,e,a){var i=a("c6b6");t.exports=Array.isArray||function(t){return"Array"==i(t)}},fdbc:function(t,e){t.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}}}]);
//# sourceMappingURL=chunk-515e30ec.a163592b.js.map